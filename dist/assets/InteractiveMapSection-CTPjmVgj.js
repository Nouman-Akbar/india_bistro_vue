import{d as We,r as g,z as x,D as je,G as De,E as K,c as i,o as l,e as n,u as ce,h as w,F as j,j as A,a as Ne,A as ue,t as _,x as He,I as f,p as Fe,L as M,q as Ve,T as Ae,M as B,H as Ue,b as Oe}from"./index-D-X8SpwI.js";const ze={class:"big-bg-icon-overlay"},Ge=["src"],Ke={class:"relative mx-auto flex w-full max-w-7xl flex-col gap-0 px-6 md:px-10"},Xe={class:"flex flex-col gap-12 md:gap-16 md:flex-row"},Ye={class:"w-full md:w-1/2 flex items-center justify-center"},qe=["src"],Je=["aria-expanded","aria-label","onMouseenter","onFocus","onMouseleave","onBlur","onClick","onKeydown"],Ze={class:"sr-only"},Qe=["aria-label","onMouseleave"],et={class:"card-body"},tt={class:"card-title"},at={class:"card-text"},st=["src","alt"],ot=["href"],nt=["aria-label"],lt={class:"w-full md:w-1/2 flex flex-col items-center md:items-start justify-center md:text-left text-center gap-8"},it={class:"flex flex-col gap-6 md:items-start items-center md:text-left text-center"},rt={key:0,class:"flex justify-center md:justify-start"},dt=["src"],ct={key:0,class:"flex flex-col gap-3 text-sm md:text-base text-[#5A5550]"},ut={class:"text-left"},ft={key:0,class:"flex flex-col gap-4 w-auto max-w-full"},ht=["href"],pt={key:0,class:"absolute inset-0 w-full h-full"},gt=["src","alt"],mt={class:"relative z-10"},vt={key:1,class:"flex justify-center md:justify-start"},xt=["src"],yt=We({__name:"InteractiveMapSection",props:{imagePath:{default:""},markers:{default:()=>[]},mapWidth:{default:823},mapHeight:{default:910},heading:{default:""},subheading:{default:""},description:{default:""},items:{default:()=>[]},decoratorImageSrc:{default:""},backgroundColor:{default:"#F5F1E8"},headingColor:{default:"#2D2A26"},subheadingColor:{default:"#5A5550"},descriptionColor:{default:"#5A5550"},cardTemplate:{default:void 0},buttons:{default:()=>[]},loadingComplete:{type:Boolean,default:!0}},emits:["marker-open","marker-close"],setup(fe,{expose:he,emit:pe}){const ge=new URL("/assets/india_map-mLMWk_0s.svg",import.meta.url).href,me=new URL("/assets/section_bg_pattern-B7xNqw0j.svg",import.meta.url).href,ve=new URL("/assets/Big%20BG%20Icon-B7eI7vCC.svg",import.meta.url),s=fe,X=pe,c=g(null),$=g({width:0,height:0}),u=g(null),m={width:823,height:910},D=g({x:.5,y:.5}),N=g({x:m.width/2,y:m.height/2}),H=g({}),h=g([]),I=g(!1),F=g(!1);let d=null,S=null,b=null;typeof window<"u"&&(d=window.matchMedia("(prefers-reduced-motion: reduce)"),F.value=d.matches);const xe=[{id:"gujarat",x:238,y:470,label:"Gujarat"},{id:"delhi",x:425,y:255,label:"Delhi"},{id:"kerala",x:450,y:790,label:"Kerala"}],p={width:240,height:150,offset:24,minWidth:200,minHeight:150};let P=null,R=null;const v=x(()=>s.markers.map(e=>{const a=H.value[String(e.id)];return a?{...e,x:a.x,y:a.y}:e})),ye=x(()=>v.value.length>0),we=x(()=>s.imagePath||ge),Y=x(()=>{var e;return((e=s.items)==null?void 0:e.filter(Boolean))??[]}),_e=x(()=>{var e;return((e=s.buttons)==null?void 0:e.length)>0}),q=x(()=>s.subheading||s.description||""),Me=x(()=>s.subheadingColor||s.descriptionColor),y=(e,a,t)=>Math.min(Math.max(e,a),t),J=()=>{if(!c.value)return;const e=c.value.getBoundingClientRect();$.value={width:e.width,height:e.height}},be=e=>{if(!c.value)return;const a=c.value.getBoundingClientRect(),t=y((e.clientX-a.left)/(a.width||1),0,1),o=y((e.clientY-a.top)/(a.height||1),0,1);D.value={x:t,y:o},N.value={x:Math.round(t*m.width),y:Math.round(o*m.height)}},ke=()=>{D.value={x:.5,y:.5},N.value={x:Math.round(.5*m.width),y:Math.round(.5*m.height)}},Ce=x(()=>({"--shadow-x":`${((D.value.x-.5)*14).toFixed(2)}px`,"--shadow-y":`${((D.value.y-.5)*18).toFixed(2)}px`})),U=e=>{const a=$.value.width||s.mapWidth,t=$.value.height||s.mapHeight;return{x:e.x/m.width*a,y:e.y/m.height*t}},Be=(e,a)=>{const{x:t,y:o}=U(e);return{left:`${t}px`,top:`${o}px`}},Z=e=>{const{x:a,y:t}=U(e),o=$.value.width||s.mapWidth,r=$.value.height||s.mapHeight,C=y(p.width,p.minWidth,Math.max(o-32,p.minWidth)),E=y(p.height,p.minHeight,Math.max(r-32,p.minHeight));let W=a+p.offset,re="right";W+C>o&&(W=a-C-p.offset,re="left"),W=y(W,0,Math.max(o-C,0));const de=y(t,E/2,Math.max(r-E/2,E/2)),Ee=y(t-de,-E/2+12,E/2-12);return{placement:re,style:{left:`${W}px`,top:`${de}px`,width:`${C}px`,minWidth:`${p.minWidth}px`,"--card-arrow-offset":`${Ee}px`}}},O=e=>u.value===e,k=()=>{R&&(window.clearTimeout(R),R=null)},V=()=>{if(u.value===null)return;const e=u.value;u.value=null,X("marker-close",e)},Q=e=>{k(),R=window.setTimeout(()=>{u.value===e&&V(),R=null},160)},z=e=>{u.value!==e.id&&(u.value=e.id,X("marker-open",e.id))},ee=e=>{k(),z(e)},te=e=>{Q(e)},ae=e=>{k(),u.value===e.id?V():z(e)},$e=(e,a)=>{(e.key==="Enter"||e.key===" "||e.code==="Space")&&(e.preventDefault(),ae(a))},Ie=(e,a)=>{var o;const t=e.relatedTarget;t&&((o=c.value)!=null&&o.contains(t))||Q(a)},se=e=>{c.value&&(c.value.contains(e.target)||V())},Se=e=>{const{x:a,y:t}=U(e);return{left:`${a}px`,top:`${t}px`}},Pe=(e,a)=>{e?h.value[a]=e:h.value.splice(a,1)},oe=(e=!1)=>{I.value=!1,e&&h.value.length&&B.set(h.value,{opacity:0,y:0,scale:1}),b&&(b.revert(),b=null)},Re=()=>{if(!I.value&&h.value.length&&c.value){if(I.value=!0,F.value){B.set(h.value,{opacity:1}),B.set(h.value,{clearProps:"transform"});return}b&&b.revert(),b=B.context(()=>{B.fromTo(h.value,{y:-200,opacity:0,scale:.6},{y:0,opacity:1,scale:1,duration:2.5,ease:"bounce.out",stagger:.12,onComplete(){const e=this.targets()[0];B.set(e,{clearProps:"transform"})}})},c.value)}},G=()=>{s.loadingComplete&&Ue(()=>{h.value.length&&Re()})},L=e=>{if(!(typeof window>"u")){if(e){F.value=e.matches;return}F.value=(d==null?void 0:d.matches)??!1}},ne=(e,a)=>{const t=v.value.find(C=>C.id===e);if(!t)return;const o=a.x??t.x,r=a.y??t.y;H.value={...H.value,[String(e)]:{x:o,y:r}},T()},le=()=>{H.value={},T()},T=()=>{var a,t;const e=v.value.map(o=>({id:o.id,state:o.stateName,x:o.x,y:o.y}));if(e.length===0){(a=console.info)==null||a.call(console,"[InteractiveMapSection] No markers to display.");return}(t=console.table)==null||t.call(console,e)},ie=e=>{const a=v.value.find(t=>t.id===e);a&&(k(),z(a))};he({highlightState:ie,getPointerViewBoxCoords:()=>({...N.value}),setMarkerPosition:ne,resetMarkerOverrides:le,logMarkerCoordinates:T});const Le=()=>{if(typeof window>"u")return;const e=window;e.__IBMapDebug__={getPointerCoords:()=>({...N.value}),highlightState:ie,setMarkerPosition:ne,resetMarkerOverrides:le,logMarkerCoordinates:T,listMarkers:()=>v.value.map(a=>({id:a.id,x:a.x,y:a.y}))}},Te=()=>{if(typeof window>"u")return;const e=window;e.__IBMapDebug__&&delete e.__IBMapDebug__};return je(()=>{J(),c.value&&(P=new ResizeObserver(J),P.observe(c.value)),window.addEventListener("pointerdown",se),Le(),T(),typeof window<"u"&&(d||(d=window.matchMedia("(prefers-reduced-motion: reduce)")),L(),"addEventListener"in d?(d.addEventListener("change",L),S="event"):"addListener"in d&&(d.addListener(L),S="listener")),s.loadingComplete&&G()}),De(()=>{P==null||P.disconnect(),window.removeEventListener("pointerdown",se),Te(),k(),d&&(S==="event"?d.removeEventListener("change",L):S==="listener"&&d.removeListener(L),S=null),oe()}),K(()=>v.value,e=>{if(u.value===null)return;e.some(t=>t.id===u.value)||V()},{deep:!0}),K(()=>s.loadingComplete,e=>{e?I.value||G():oe(!0)},{immediate:!0}),K(()=>v.value.length,()=>{!I.value&&s.loadingComplete&&G()}),(e,a)=>(l(),i("section",{class:"relative w-full bg-repeat py-20 overflow-hidden",style:w([{margin:"0"},{"background-image":`url(${ce(me)})`,"background-color":s.backgroundColor}])},[n("div",ze,[n("img",{src:ce(ve),alt:"",class:"big-bg-icon"},null,8,Ge)]),n("div",Ke,[n("div",Xe,[n("div",Ye,[n("div",{ref_key:"mapRef",ref:c,class:"map-surface",style:w({aspectRatio:`${s.mapWidth} / ${s.mapHeight}`}),onPointermove:be,onPointerleave:ke},[n("img",{src:we.value,alt:"Map of India",class:"map-image"},null,8,qe),ye.value?(l(!0),i(j,{key:0},A(v.value,(t,o)=>(l(),i("div",{key:t.id,class:"marker-container"},[n("button",{type:"button",class:ue(["marker-point",{"marker-point--active":O(t.id)}]),style:w(Be(t)),ref_for:!0,ref:r=>Pe(r,o),"aria-haspopup":"dialog","aria-expanded":String(O(t.id)),"aria-label":`Show details for ${t.stateName}`,tabindex:"0",onMouseenter:r=>ee(t),onFocus:r=>ee(t),onMouseleave:r=>te(t.id),onBlur:r=>Ie(r,t.id),onClick:r=>ae(t),onKeydown:r=>$e(r,t)},[n("span",Ze,_(t.stateName),1)],46,Je),Ne(Ae,{name:"marker-card"},{default:He(()=>[O(t.id)?(l(),i("div",{key:0,class:ue(["marker-card",[`marker-card--${Z(t).placement}`]]),style:w([Z(t).style,Ce.value]),role:"dialog","aria-label":`${t.stateName} details`,onMouseenter:k,onMouseleave:r=>te(t.id)},[s.cardTemplate?(l(),Fe(Ve(s.cardTemplate),{key:0,marker:t},null,8,["marker"])):M(e.$slots,"cardTemplate",{key:1,marker:t},()=>[n("div",et,[n("p",tt,_(t.stateName),1),n("p",at,_(t.shortText),1),t.imageUrl?(l(),i("img",{key:0,src:t.imageUrl,alt:t.stateName,class:"card-image"},null,8,st)):f("",!0),t.link?(l(),i("a",{key:1,href:t.link,class:"card-link"}," Explore this region Â» ",8,ot)):f("",!0)])],!0)],46,Qe)):f("",!0)]),_:2},1024)]))),128)):(l(),i(j,{key:1},[(l(),i(j,null,A(xe,t=>n("div",{key:t.id,class:"pulse-point",style:w(Se(t)),"aria-label":t.label},null,12,nt)),64)),a[0]||(a[0]=n("p",{class:"no-data-label"},"No data",-1))],64))],36)]),n("div",lt,[M(e.$slots,"content",{},()=>[n("div",it,[s.decoratorImageSrc?(l(),i("div",rt,[n("img",{src:s.decoratorImageSrc,alt:"",class:"h-6"},null,8,dt)])):f("",!0),M(e.$slots,"heading",{},()=>[s.heading?(l(),i("h2",{key:0,class:"text-2xl md:text-4xl font-semibold uppercase tracking-wider leading-tight",style:w({color:s.headingColor})},_(s.heading),5)):f("",!0)],!0),M(e.$slots,"subheading",{},()=>[q.value?(l(),i("p",{key:0,class:"text-base md:text-lg leading-relaxed max-w-md",style:w({color:Me.value})},_(q.value),5)):f("",!0)],!0),M(e.$slots,"list",{},()=>[Y.value.length?(l(),i("ul",ct,[(l(!0),i(j,null,A(Y.value,t=>(l(),i("li",{key:t,class:"flex items-start gap-2"},[a[1]||(a[1]=n("span",{class:"mt-1 h-1.5 w-1.5 rounded-full bg-[#B66C3B]"},null,-1)),n("span",ut,_(t),1)]))),128))])):f("",!0)],!0),M(e.$slots,"buttons",{},()=>[_e.value?(l(),i("div",ft,[(l(!0),i(j,null,A(s.buttons,(t,o)=>(l(),i("a",{key:o,href:t.link||"#",class:"relative inline-flex items-start justify-center px-8 py-3 text-white font-semibold text-sm uppercase tracking-wider transition-transform duration-300 hover:scale-105 overflow-hidden"},[t.backgroundImageSrc?(l(),i("span",pt,[n("img",{src:t.backgroundImageSrc,alt:t.text||"Button Background",class:"w-full h-full object-contain"},null,8,gt)])):f("",!0),n("span",mt,_(t.text),1)],8,ht))),128))])):f("",!0)],!0),M(e.$slots,"default",{},void 0,!0),s.decoratorImageSrc?(l(),i("div",vt,[n("img",{src:s.decoratorImageSrc,alt:"",class:"h-6"},null,8,xt)])):f("",!0)])])])])])],4))}}),Mt=Oe(yt,[["__scopeId","data-v-d2df753d"]]);export{Mt as default};
